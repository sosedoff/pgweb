sudo: required



matrix:
  - os: linux
    services:
      - docker
    language: go
    go:
      - 1.7.6
      - 1.8.3
      - 1.9
    addons:
      postgresql: "9.6"
      env:
        - GO15VENDOREXPERIMENT=1
        - DISPLAY=':99.0'
      apt:
        sources:
          - google-chrome
        packages:
          - google-chrome-stable



before_script:
  - |
    if [ "$TRAVIS_OS_NAME" = "linux" ]; then
      sh -e /etc/init.d/xvfb start
    fi

before_install:
  - ./script/check_assets.sh

install:
  - make setup

script:
  - make build
  - make test
  - make test-acceptance
  - make test-all
  - make docker-release